<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Done</title>
</head><body>
<h1>Done</h1>

<blockquote><em>
  This file contains completed tasks. 
</em></blockquote>

See also:
<ul>
  <li> <a href="to-do.html">Pending tasks</a><p>
  <li> <a href="#end">Most Recent Entry</a> (at end.)
</ul>

<ol>
  <li> 1998-10-?? <b>Bug</b> GenericAgent.findInterform needs extension list.
       <br>
       Actually, finding files ought to be in a utility class, because you
       need to get out: the file pathname, the URL path, and the part of the
       URL after the file that was found (which gets passed to the
       interform). 
       (1998-10-13) <br>
       
  <li> 1998-10-30 <b>Hole:</b> PIA datatype transition. <br>
       During the transition Agent and Transaction need to be able to
       return both SGML and DOM data as needed.  Fortunately most of the
       namespaces contain only strings; it's really only hooks that differ.
       (1998-06-18) <br>
       -- Make Agent and Transaction implement an interface with methods
	  like <code>getObjectAt</code> and <code>getStringAt</code>,
	  etc. instead of the Attr interface; sort it out in the handlers.
       
  <li> 1998-10-30 <b>Bug</b> DPS hooks aren't executed <br>
       (1998-10-28)<br>

  <li> 1999-01-04 <b>Hole</b> <code>handle</code> subdir for tag handlers <br>
       Agent-specific handlers are in Agent. 
       (1998-12-17) <br>

  <li> 1999-02-09 <b>Bug</b> ~ doesn't work in some cases. <br>
       ~Agent/ works, but ~Agent doesn't. In general, a directory only gets
       found if a / is present.  Sounds like a redirection bug.
       (1999-02-05) <br>
       -- fixed by a cleanup of the redirection code, and more use of
	  urlDecode. 

  <li> 1999-02-09 <b>Bug</b> Agent~ doesn't work at all. <br>
       (1999-02-05) <br>
       -- findInterform was removing the agent name while mistaking it for the
	  type. 

  <li> 1999-02-10 <b>Bug</b> /~/dir doesn't work. <br>
       ~/HEADER.html works, but ~/Admin doesn't.  ROOT/~/Admin does. ~/Config
       does. 
       (1999-02-09) <br>
       -- Due to the fact that Admin is an agent and Config isn't.  The
	  problem is in Resolver.agentFromPath().

  <li> 1999-02-?? <b>Hole</b> remove Interform interpretor completely <br>

  <li> 1999-02-19 <b>Bug</b> Directory uses &lt;base&gt;. <br>
       Instead, it should use absolute paths for its links, and <em>fix</em>
       any relative links in HEADER.html.  The problem is that the base breaks
       when the system name is not what <code>hostname</code> returns (e.g.,
       <code>localhost</code>).  There is no choice but redirection or link
       fixup if an <code>index.html</code> exists.
       (1999-02-19) <br>
       -- done except for fixing the redirect problem.

  <li> 1999-02-22 <b>Hole</b> remove legacy tagset <br>

  <li>1999-03-12 <b>Bug</b> Agent.put("criteria", v) must split <br>
       Need to split <code>v</code> on whitespace.
       (1999-02-22) <br>

  <li> 1999-03-19 <b>Bug</b> need per-agent document and data directories <br>
       This would have two good effects: avoid searching in the obsolete
       <code>src/Agents</code>, and allow agents to be anywhere.  Actually the
       InterForm search path should be a real path; data is just a single
       dir.  Should have the following attributes on Agent:
       <ul>
	 <li> <code>codeDir</code> the code directory.  Default is
	      <code>Agents/<em>path</em></code>.  
	 <li> <code>userDir</code> user's overrides
	 <li> <code>dataDir</code> the data; <em>always</em> using
	      <code>~</code> 
       </ul>
       Note that currently the <code>if_root</code> attribute preceeds the
       default paths, but does not override them.  Similarly, many possible
       roots and paths are currently searched. 
       (1998-12-17) <br>
       -- Note that as of 1999-02-09 this is mostly, if not completely, done
       
  <li> 1999-03-19 <b>Impr</b> InterForm lookup should be in a utility class <br>
       Possibly both FileAccess and the InterForm stuff should be in a "util"
       sub-package. 
       (1998-11-02)<br>

  <li> 1999-03-23 <b>Impr</b> Agent naming with paths. <br>
       See <a href="/Doc/Notes/steve/naming.html">note</a>.
       (1999-03-11) <br>      

  <li> 1999-03-23 <b>Hole</b> Better agent naming conventions. <br>
       specified using the following attributes on Agent:
       <ul>
	 <li> <code>name</code> the base name.
	 <li> <code>base</code> the agent's ``mount point''
	 <li> <code>path</code> the full path relative to the PIA's document
	      root: <code>base/name</code> -- this is the unique key for
	      looking up the agent. 
       </ul>
       (1998-12-22) <br>

  <li> 1999-04-19 <b>Bug</b> Directory uses redirect for index.html. <br>
       Redirection breaks when the system name is not what
       <code>hostname</code> returns (e.g., <code>localhost</code>).  There
       are only two choices here: redirect and hope the full URL is in the
       headers, or returning the file and fixing the links.  
       (1999-02-19) <br>
       -- Redirection is the lesser of two evils here, having tried both.

  <li> 1998? <b>Impr:</b> ISO 8601 date representation (dashes) <br>
       See <a href="http://www.ft.uni-erlangen.de/~mskuhn/iso-time.html">this
       summary</a>.  The main things needing fixing are the entity table
       initialization, and dates as presented by the History agent's hook.
       (1998-06-18) <br>
       -- Should add timezone and UTC time/date as well.

  <li> 1999-04-27 <b>Bug</b> Fix Agent namespace operations <br>
       AGENT:agent messes up the agent namespace: needs to be AGENTS:agent.
       The Tabular ops have to go through the namespace rather than the other
       way around, and initialization from a table needs to do the same.  When
       fixed, go into ActiveDoc and change (Tabular)agent to agent in two
       places.
       (1999-04-22) <br>

  <li> 1999-04-27 <b>Bug</b> no namespace for all installed agents. <br>
       (1998-10-12) <br>
       
  <li> 1999-04-28 <b>Bug</b> AGENTS:foo:bar <br>
       Still not working because Agent doesn't take it to the next level
       anymore.  Should be done in Index instead.
       (1999-04-27) <br>

  <li> 1999-04-30 <b>Hole</b> Ability to save and restore Agents as XML <br>
       Need to distinguish the initialization done at create time from that
       done after read-in.  There should be an attribute that says whether to
       read the init file.  Distinguish installation (file in agent directory)
       from restart (file in user directory).
       (1999-04-07) <br>

  <li> 1999-05-06 <b>Bug</b> Rename install -> create <br>
       Now that there are two ways to install agents (load and create),
       ``install'' is inaccurate in most places.
       (1999-05-05) <br>

  <li> 1999-05-06 <b>Impr</b> Install agent from arbitrary directory. <br>
       When loading an agent from an arbitrary directory, need special hack to
       override the "home-dir" attribute in the XML file.  Possibly the name
       as well.  Things get even more complicated if the XML is accessed from
       a web server.
       (1999-04-30) <br>

  <li> 1999-05-06 <b>Hole</b> Admin must save and restore Agents as XML. <br>
       Admin agent needs to keep track of where they are.  Possibly by having
       the agent submit a form.  Be nice if type agents could optionally
       manage their own subs. 
       (1999-04-07) <br>

  <li> 1999-05-06 <b>Hole</b> Eliminate START-UP.html <br>
       The default one can just go.  Then it will be safe to move the
       existence check (for a customized one) to before the check for
       <code>agent-files.xml</code>.
       (1999-05-06) <br>

  <li>1999-05-06 <b>Hole</b> Eliminate <code>checkpoint.dat</code>, etc. <br>
       Serialized objects were never especially useful.
       (1999-05-06) <br>

  <li> 1999-05-11 <b>Impr</b> pia-exit needed <br>
       Need the equivalent of the old <pia-exit> tag.  Needs a way to lock it
       out (global or agent property).
       (1999-05-11) <br>

  <li> 1999-05-18 <b>Hole</b> Admin must keep track of AGENT.xml files. <br>
       Probably by having an agent submit a form when it was modified.  Be
       nice if type agents could optionally manage their own subs.  Be nice to
       be able to check off files to install.  Minimum is something on options
       and index pages to register the agent's XML: restart every time?
       Can compute list from agents with "onStart" option set.  We have
       "saveFile"; need "loadFile" as well, since it will be different the
       first time.  "agentFiles.xml" wants to contain an &lt;agent-file&gt;
       element for each agent, not just the filename.
       (1999-05-06) <br>

  <li> 1999-05-18 <b>Bug</b> save on option.xh doesn't register; wrong file. <br>
       save has wrong filename -- saves in data dir.  Doesn't register the
       saved agent, either.
       (1999-05-18) <br>

  <li> 1999-05-19 <b>Bug</b> save on option.xh saves in wrong file. <br>
       ./Home somehow ends up as .../Agents/Home/Home/...
       (1999-05-18) <br>
       -- that's because it's being written in the agent.  Need paths starting
	  with <code>./</code> to refer to the top level.

  <li> 1999-05-19 <b>Impr</b> pia-exit lock-out needed <br>
       Need  a way to lock out &lt;pia-exit&gt; (global or agent property).
       (1999-05-11) <br>
       -- must check for AGENTS:Admin:lockExit in the handler. 

  <li> 1999-05-21 <b>Bug</b> Tagset doesn't get switched in GenericAgent.loadFrom <br>
       If you're using the right tagset to start with, it works.
       (1999-05-20) <br>
       -- if you explicitly poke the input instead of relying on TopContext to
	  do it, it works.

  <li> 1999-06-15 <b>Bug</b> DOFS/AGENTS.xml had absolute paths <br>
       (1999-06-14) <br>
       -- the &lt;bind name='root'&gt; statements had references to
	  <code>/home/steve</code>, obviously left over from their creation.
	  Funny, it worked for me...  Put a note in <a
	  href="/Doc/notes/pgage/build_release.html">build_release.html</a>.

  <li> 1999-06-15 <b>Bug</b> Type agent inheritance might not be working <br>
       (1999-06-14) <br>
       -- but it seems to work, at least for the Toolbar and DOFS agents. 

  <li> 1999-07-19 <b>Hole</b> per-Agent mappings for file extensions <br>
       Need a way to specify tagset, MIME type for various extensions
       (specifically <code>.html</code>).
       (1999-07-14) [requested by Tim] <br>
       -- &lt;bind name="AGENT:extension-map"&gt;
              &lt;ext extension="html" type="text/html" tagset="foo" /&gt; ...

  <li> 1999-07-20 <b>Bug</b> New extensions with no tagset are text/plain <br>
       FileAccess doesn't know the new extension map. 
       (1999-07-19) <br>

  <li> 1999-09 <b>Bug</b> Synchronization problem with POST req. <br>
       When responding to a POST on a sufficiently fast machine, the socket
       gets closed (presumably by the HTTPRequest) before the response is
       finished writing.
       (1999-06-23) <br>
       -- Greg found this: it turns out that some browsers tack a CRLF onto
	  the POST data, but don't count it in ContentSize.

  <li> 1999-09-10 <b>Impr</b> PIA should use XML for default extension map.<br>
       PIA should use GenericAgent's mechanism for the default mappings;
       changing PIA's map should make all agents reprocess their maps.
       (1999-07-20) <br>
       -- This falls out of the Site stuff.

  <li> 1999-09-22 <b>Hole</b> Use <code>site</code> to simplify Agent. <br>
       Mainly, everything in <code>Agent</code> related to
       <code>findDocument</code> and agent naming goes away.  Almost
       everything, in other words!  Even <code>respond</code>, etc. can go
       away, because <code>HTTPRequest.toMachine</code> can do the document
       lookup.  Agents can still specify handling by setting the request's
       <code>toMachine</code> field.

       <p>The Resolver gets simpler, too.  <code>agentFromPath</code> moves to
       Root (the only place where it's called) and then goes away.
       (1999-08-20) <br>

  <li> 1999-09-22 <b>Impr</b> option to autosave agent-files <br>
       Admin agent option to autosave when an agent is loaded or saved.
       (1999-05-18) <br>
       -- superceded by new Site/Agent stuff.
       
  <li> 1999-09-22 <b>Impr</b> Per-agent mapping of extension to tagset. <br>
       It really needs to be possible to fully specify the mapping of file
       extension to tagset.  The present technique is kludgy.  In some cases
       the mapping needs to include access method (GET/PUT/POST).
       (1999-03-11) <br>
       -- superceded by new Site/Agent stuff.

  <li> 1999-09-22 <b>Bug</b> AGENT needs tagset attr. <br>
       This avoids the current bogus check for
       <code><em>name</em>-xhtml</code> in AgentBuilder.
       (1999-09-16) <br>

  <li> 1999-09-28 <b>Impr</b> Get rid of Piaproperties <br>
       It's not needed.  Possibly define a wrapper for Tabular that
       does the conversions.  Used only in Pia and ThreadPool (for
       maxthreads).  It's used as a Properties in HTTPRequest (for
       proxy authorization) and Setup.
       (1999-09-23) <br>

  <li> 1999-09-28 <b>Bug</b> logs created in root, not home. <br>
       Probably a screwup on property names.
       (1999-09-28) <br>

  <li> 1999-09-29 <b>Impr</b> Change environment variables <br>
       To <code>PIA_HOME</code> (old <code>PIA_DIR</code>),
       <code>PIA_ROOT</code> (old <code>PIA_ROOT</code>), and
       <code>PIA_SITE</code>.  Maybe <code>PIA_SITE_XCF</code> as well.
       This will be clearer, and it means that all of the PIA's environment
       variables will start with PIA.
       (1999-09-27) <br>

  <li> 1999-10-04 <b>Hole</b> initialize PIA props from config file <br>
       Maybe by initializing the PiaSite's properties with a NamespaceWrap
       that wraps the PIA's properties.  Need special handling for
       sub-elements, e.g.  &lt;port&gt;n&lt;/&gt;, which implies
       special-casing <code>get</code> for entities that contain singleton
       lists of elements.
       (1999-09-28) <br>

  <li> <b>Hole</b> Simplified command line<br>
       Command line should specify config file (with no option flag) or root
       directory (with <code>_subsite.xcf</code> file), and optional
       assignments, e.g. <code>port=8001</code> that override attributes in
       the outer &lt;Container&gt; element.  No property file.  Everything
       else should come from the config.  Add <code>pia:</code> to specify
       directories in the PIA_HOME hierarchy.  Ignore the Java property list
       except during initialization.
       (1999-09-23) <br>

  <li> <b>Hole</b> Namespaces needed: PIA, ENV, LOG, AGENTS <br>
       PIA: PiaProperties; basically everything on the Pia class.
       ENV: the environment (Java system props)
       LOG: User messages.  names include "debug", "message", "verbose", ...
       AGENTS: Resolver's agent table.  Initialize an agent with
       <code>&lt;set name=AGENTS:foo&gt;options&lt;/&gt;</code>.
       Need version info in PIA namespace.
       (1998-11-02)<br>
       -- PIA (1999-03), AGENTS (1999-04-27)
       
  <li> <b>Hole</b> Use <code>Site</code> to simplify Pia. <br>
       <em>All</em> of the metadata on Pia should be obtained from the
       configuration.  Maybe Pia should simply extend Site.  If not, at least
       it should get its metadata (port, etc.) from the Site.  There does need
       to be a PIA <em>namespace</em>, but it, too, should be site metadata.
       (1999-09-10) <br>

  <li> 1999-10-05 <b>Hole</b> Authorization still missing <br>
       See old GenericAgent for implementation.  Needs to be a property, of
       course, and either a flag needs to be inherited (<code>isSecure</code>)
       or the server needs to check all parents every time (probably better).
       Another option is a new kind of agent (watching a path prefix).
       (1999-10-04) <br>

  <li> 1999-10-05 <b>Bug</b> redirect <code>~name</code> to home directory <br>
       Otherwise links to, e.g., ``<code>..</code>'' won't work.  Might want
       this to be selectable, perhaps with <code>AGENT:noredirect</code>.
       (1999-09-27) <br>

  <li> 1999-10-18 <b>Impr</b> Rename port -> virtualport <br>
       setting "port" sets both virtualport and realport.
       (1999-10-18) <br>

  <li>1999-10-21 <b>Bug</b> DNS lookup on requestor is sometimes slow. <br>
       If DNS is broken, this makes the PIA _very_ slow to respond.
       Otherwise, it's just slightly slow.
       (1999-10-21) <br>
       -- Solution is to log by IP address.  Doesn't seem to break anything.

  <li> 1999-12-09 <b>Bug</b> redirect <code>~name</code> to home directory <br>
       -- fixed another stupid mistake: the path starts with <code>/~</code>,
	  not <code>~</code>.

  <li> 1999-12-14 <b>Hole</b> Move tagsets <br>
       Probably to PIA/lib, PIA/Tagsets, or PIA/lib/tagsets.  Might be
       worthwhile adding lib to CLASSPATH to keep resource stuff working.
       Possibly subdirs for <code>pia</code> and <code>dps</code> tagsets.
       (1999-12-06) <br>
       -- Combination of PIA/lib (for basic, etc.) and PIA/Tagsets.

  <li> 1999-12-16 <b>Hole</b> support for reading/writing app status files <br>
       Need &lt;read-vars&gt;, &lt;write-vars&gt; tags in
       <code>pia-tags</code>.  Use &amp;AGENT:status; for the list of
       variables to dump.
       (1999-12-16) <br>

  <li> 1999-12-20 <b>Bug</b> exception thrown if no -home specified <br>
       (1999-12-20) Thomas B. Passin <br>
       -- It was creating a new File without checking the path for being
	  null. 
</ol>
<a name="end">End of list.</a>
<hr>
<b>Copyright &copy; 1998-2000 Ricoh Silicon Valley</b><br>
<b>$Id: done.html,v 1.25 2000-04-20 22:57:38 steve Exp $</b><br>
</body></html>
