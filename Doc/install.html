<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html><head><title>PIA Installation Manual, release 2.0</title></head>

<body>
<center><h1>Installing the PIA</h1></center>
<big>

<p>This manual describes how to install the Platform for Information
   Applications (PIA).  Developers intending to create applications should
   also consult the <a href="author.html">Author's Guide</a>. 
</p>

<p> For further information about configuring, operating, and updating the
    PIA, see <a href="using.html">Using the PIA</a>.  For information about
    obtaining the files in the first place, see <a
    href="http://www.risource.org/PIA/Downloading.shtml">
    <code>http://www.risource.org/PIA/Downloading.shtml</code></a>.  A
    complete list of documentation can be found in the <a
    href="doclist.html">PIA Document List</a>.
</p>

<p>Topics covered in this document include:</p>

<ul>
  <li> <a href="#Installing">Installing the Files</a></li>
  <li> <a href="#Setup">Initial Setup</a>
  <li> <a href="#Running">Running the PIA</a></li>
</ul>

<h2><a name="Installing">Installing the Files</a></h2>

<p> The files are supplied in the form of a <code>gzip</code>'ed
    <code>tar</code> file, obtained as described in 
    <a href="http://www.risource.org/PIA/Downloading.shtml">
    <code>http://www.risource.org/PIA/Downloading.shtml</code></a>.
</p>

<blockquote><small>

<p> You should unpack the <code>tar</code> archive inside the directory
    where you want the PIA to be installed; typically this will be your home
    directory, or possibly <code>/usr/local</code> or a subdirectory of
    <code>/usr/local/src</code> on a Unix system.
</p>

<p> Unpacking can be done on a Unix or Linux machine with one of the following
    two commands; <code>winzip</code> can be used on Windows.
</p>

<ol>
  <li> <code>tar xzf pia_src.tgz</code><br>
       (requires GNU <code>tar</code>).
  <li> <code>gunzip pia_src.tgz; tar xf pia_src*</code>
</ol>

<p> Unpacking the files will create a directory called <code>PIA</code>.  This
    is the PIA's ``home directory,'' and in the documentation that follows we
    will refer to it as <code>$PIA_HOME</code>.
</p>

</small></blockquote>

<h3>Directory Structure</h3>

<p> The following table describes the directory structure immediately under
    the PIA directory.  Every directory also contains a file called
    <code>HEADER.html</code> which describes its contents. 
</p>

<table border="1" frame="border">
<caption> Directory Structure (inside the PIA directory)</caption>
<tbody>
<tr>
<th align="left">Doc</th>
<td> Complete documentation for the PIA.  </td>
</tr>
<tr>
<th align="left">Agents</th>
<td>Subdirectories for standard applications and agents. Each subdirectory
contains the collection of XML and HTML files (active pages) that work together
to form an application.  </td>
</tr>
<tr>
<th align="left">Config</th>
<td>Configuration information, including subdirectories for Makefiles and for
XML site configuration files.</td>
</tr>
<tr>
<th align="left">Samples</th>
<td>Contains a few simplified active pages, which are meant to be copied and
    modified as templates for writing your own active pages.</td>
</tr>
<tr>
<th align="left">Contrib</th>
<td>Used for contributed agents and other files that are not a part
of the standard release.</td>
</tr>
<tr>
<th align="left">bin</th>
<td>Programs that actually run the PIA software either as a web
server (<code> pia, pia.bat </code> or as a command line filter <code> process</code>.
 Note that <code>pia</code> and <code>process</code> run under Unix
only.)</td>
</tr>
<tr>
<th align="left">lib</th>
<td>Currently not being used.  This directory is meant to  be used to hold
class files and other libraries when the PIA is packaged as an application
without its source code.</td>
</tr>
<tr>
<th align="left">src</th>
<td valign="top"><code>src/java/</code> contains the Java source
files used in the PIA software.  The main code is in <code>src/java/org/risource/*</code> 
corresponding to <code>org.risource.*</code> package names.  
<br><code>src/org</code> and <code>src/misc</code> contain
code referenced by the PIA software and included for convenience. <code>src/app</code> contains
utility applications.</td>
</tr>
<tr>
<th align="left">CVS</th>
<td> CVS directories exist in <var>PIA_HOME</var>  and in each of the
	directories under it, for keeping track of updates and source-code
	versions; you shouldn't need to modify or even look in these
	directories, and you should remove them when copying applications to
	modify for your own use (e.g. copying the <code>HelloWorld</code>
	application out of <code>PIA/Samples</code>). </td>
</tr>
</tbody>
</table>

<h2><a name="Setup">Initial Setup</a></h2>

<h3>The PIA's Directories</h3>

<p> The PIA uses two very similar directories, which can (optionally) be set
    up using environment variables:</p>
<ul>
  <li> <var>PIA_HOME</var> indicates the location where the PIA files were
       installed.</li> 

  <li> <var>PIA_ROOT</var> indicates the location where the PIA web server
       looks for its web pages, and where applications write their data
       files.</li> 
</ul>

<blockquote><small>

<p> Why two directories?  So one of them can be shared by many users and
    updated frequently (via CVS), while the other is personalized by each user
    and not overwritten by the updates. </p>

<p> The PIA's ``virtual root'' (usually <var>PIA_HOME</var>) directory
    <em>parallels</em> the ``real root'' (<var>PIA_ROOT</var>), but the real
    root has priority.  Whenever a PIA application needs to write a file it
    does so under the real root; similarly, whenever the PIA <em>serves</em> a
    file to a browser, it looks first under the real root.

<p> But if the PIA can't find a file in the real root, it then looks in the
    virtual root (because the PIA <em>never</em> tries to write files there,
    the virtual root could even be a CD-ROM!). The standard default virtual
    root for the PIA is <code>PIA_HOME</code>, the PIA's home directory.  In
    this way, we keep the PIA's files, which you have just downloaded and
    which can be automatically updated using CVS, separate from any
    application data and personal customizations you may have done.

</small></blockquote>

<p> As a consequence of this arrangement, <strong> we recommend you don't edit
    <i>anything</i> in <var>PIA_HOME</var>, which is automatically
    updated/overwritten by CVS, unless you plan on
    contributing to the PIA codebase via RiSource.org.</strong>
    Instead, write everything under <var>PIA_ROOT</var>
    (e.g. <kbd>~/.pia</kbd>). </p>


<p> Usually the directory-setup process is invisible to you,
    especially if you are running the pia from <code>PIA/bin</code> and/or you
    have not set <var>PIA_HOME</var> as an environment variable.</p>

<blockquote><small>

<p> The execution scripts (e.g. <code>PIA/bin/pia</code>) attempt to set the
    <var>PIA_HOME</var> variable based on the location of the script or the
    current working directory. But if you
    want to run the pia from a different location, or run a different version,
    you may have to explicitly set this variable to the location of the PIA
    directory you just installed (e.g. <code>PIA_HOME=~/PIA</code>).
</p>

<p> The directory <var>PIA_ROOT</var> is automatically created by the PIA the
    first time it is run.  You are free to reset its location if desired; this
    can be done on the command line with the <kbd>-root</kbd> option, or by
    setting the environment variable <var>PIA_ROOT</var>.  On Unix, the
    default location for <var>PIA_ROOT</var> is <kbd>~/.pia</kbd>.  On
    Windows, the default directory is
    <code>c:\PIAUSERS\<var>username</var></code> (if a username is not
    available <code> nobody</code> is used).
</p>

<p> If you use the <kbd>-root</kbd> or <kbd>-home</kbd> command line option to
    specify <var>PIA_ROOT</var> or <kbd>PIA_HOME</kbd>, that setting takes
    precedence over the one you specify in the corresponding environment
    variable.
</p>

</small></blockquote>

<blockquote><small>

<p>It is convenient to put the directory <code>$PIA_HOME/bin</code>, which
contains scripts (including the one that implements the <code>pia</code>
command!)  into your shell's search path.  You may also want to specify a
different root.  On Linux you can do this by putting
the following into your <code>~/.bash_profile</code> file: </p>

<pre>
  # The following line will change depending on where the PIA is installed
  export PIA_HOME=$HOME/PIA
  export PATH=$PIA_HOME/bin:$PATH
  export PIA_ROOT=$HOME/.pia
</pre>

<p> You may also need to set up Java's <code>CLASSPATH</code> environment
    variable.  The PIA's wrapper script will try to set one up for
    you, but whether it succeeds will depend on how clever your java
    implementation is.  You <em>don't</em> have to have
    <code>$<em>PIA_HOME</em>/src/java</code> in your <code>CLASSPATH</code>;
    the wrapper script <em>is</em> smart enough to add it for you.
</p>
</small></blockquote>

<h2><a name="Running">Running the PIA </a></h2>

<p> It is easiest to launch the  PIA with the command
    <code>PIA/bin/pia</code>.<p>

<blockquote><small>

<p>On UNIX or Linux, once you have set up the <code><var>PIA_HOME</var></code>
and <code><var>PIA_ROOT</var></code> environment variables you can launch the
PIA with the command: ``<code>$PIA_HOME/bin/pia</code>'', or just
``<code>pia</code>'' if <code>$PIA_HOME/bin</code> is in your search path.  A
complete list of command-line options can be found by running
<kbd>$PIA_HOME/bin/pia -help</kbd> at the shell prompt.</p>

<p>Under Windows 9x and NT, launch the PIA in a DOS window with the command:
<code><var>PIA_HOME</var>/bin/pia.bat</code> -- this is a batch file that makes
use of the <code><var>PIA_HOME</var></code> and <code><var>PIA_ROOT</var></code>
environment variables, and is similar in function to <code>pia_wrapper</code>
on Unix.</p>

<p> More information about running the PIA, including the available
    command line and configuration file options, can be found in the companion
    manual <a href="using.html">Using the PIA</a>.
</p>

</small></blockquote>

<h2>Using the PIA</h2>

<p> The PIA acts as a Web server.  Assuming you have gotten the PIA to run in
    its default configuration, you should now be able to browse to <code><a
    href="http://localhost:8888/">http://localhost:8888/</a></code> in order
    to access the PIA's own web pages. </p>

<blockquote><small>

<p>If the default configuration is
    different and you have run the PIA from a command line, it will have
    printed out a line like:
</p>

<pre>
  Point your browser to &lt;URL: http://blackroot.crc.ricoh.com:8001&gt;
</pre>

<p> after initializing, and you can cut-and-paste the URL on that line into
    your browser and go from there. 
</p>

<p> There are some applications---such as a browser proxy and browsing-history
    system---which require that your browser use the PIA as a proxy.  This
    enables the PIA to process any incoming and outgoing pages as you would
    like.  See the <code>Proxie</code> for more details.
</p>

<p> It is also possible to use the PIA ``off line'' from the command line, as
    a pure document processor.  See <a href="using.html#process">Using the
    PIA</a>.
</p>

</small></blockquote>

<h2><a name="Questions">Questions, Problems, or Comments</a></h2>

<p>You can check for known bugs by going to <code><a
href="http://www.RiSource.org/PIA/">
http://www.risource.org/PIA/</a></code></p>

<p> Questions, problems and comments should be directed to <code><a
href="mailto:pia-bugs@risource.org">PIA-bugs@risource.org</a></code>.  </p>


<hr>
<b>Copyright &copy; 1999 <a href="http://rsv.ricoh.com/">Ricoh Silicon
   Valley</a>.</b>
   Open Source at &lt;<b><a href="http://RiSource.org/">RiSource.org</a>/<a
                         href="http://RiSource.org/PIA">PIA</a></b>&gt;.<br>
<i>$Id: install.html,v 1.13 1999-10-19 23:41:40 bill Exp $</i><br>

</big>

</body></html>
