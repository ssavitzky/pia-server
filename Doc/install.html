<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html><head><title>PIA Installation Manual, release 2.0</title></head>

<body>
<center><h1>Installing the PIA</h1></center>
<big>

<p>This manual describes how to install the Platform for Information
   Applications (PIA).  
</p>

<dl>
  <dt> <strong>Contents:</strong>
  <dd> 
       <ul>
	 <li> <a href="#Installing">Installing the Files</a></li>
	 <li> <a href="#Quick">Quick Start</a>
	 <li> <a href="#Setup">Initial Setup</a>
	 <li> <a href="#Running">Running the PIA</a></li>
       </ul>
</dl>
</big>

<dl>
  <dt> <strong>See also:</strong>
  <dd>
       <ul>
	 <li> <a href="using.html">Using the PIA</a> for further information
	      about configuring, operating, and updating the PIA.
	 <li> <a href="http://www.risource.org/PIA/Downloading.shtml">
	      <code>http://www.risource.org/PIA/Downloading.shtml</code></a>
	      for information about obtaining the files in the first place.
	 <li> The <a href="author.html">Author's Guide</a> if you want to
	      construct applications using the PIA.
	 <li> The <a href="doclist.html">PIA Document List</a>, a complete
	      list of the PIA's online documentation.
       </ul>
</dl>



<h1><a name="Installing">Installing the Files</a></h1>

<big>
<p> We will assume that you have already downloaded and unpacked the PIA
    files, as described in <a
    href="http://www.risource.org/PIA/Downloading.shtml">
    <code>http://www.risource.org/PIA/Downloading.shtml</code></a>.  You
    should now have a directory called <code>PIA</code>; this is the PIA's
    ``<em>home directory</em>'' and will be referred to from now on as
    ``<var>PIA_HOME</var>''.
</p>

<blockquote><small>

<p> You should have unpacked the <code>tar</code> archive inside the directory
    where you want the PIA to be installed; typically this will be your home
    directory, or possibly <code>/usr/local</code> or a subdirectory of
    <code>/usr/local/src</code> on a Unix system.
</p>

</small></blockquote>



<hr/>
<h1><a name="Quick">Quick Start</a></h1>



<big>
<em> As a static Web Server...</em>

<blockquote>
<p> Do you have access to a directory (let's call it <code>html_dir</code>) with
     some HTML files in it? (If not, skip to the  <em>"active web
     server"</em> section following). Start the PIA with the command</p>

<p>  <code>PIA/bin/pia  html_dir</code> </p>

<p> [this command tells the PIA to serve files from <code>html_dir</code>; you
    should see some initialization messages and a "Point your browswer to..."
    URL the end.] </p>

<p> Next, view a page file (say <code>my_page.html</code>) by
    pointing your browser as the PIA suggests, for example </p>

<p> <code>http://penguin.crc.ricoh.com:8888/my_page.html</code> </p>

<p> You should see your page displayed, just as if it were displayed by a
    regular web server like Apache. </p>
</blockquote>


<em> As an active Web Server...</em>


<blockquote>

<p> To serve active pages, all you need is some active pages to serve!  So
    copy a <code>home.xh</code> file from one of 
    <code>PIA/Samples/[HelloWorld,FileHandling,Form,PrettyStuff]</code>
    into <code>html_dir</code> (for example, on Unix <code>cp 
    PIA/Samples/HelloWorld/home.xh html_dir/home.xh </code>). </p>

<p> Point the browser at one of these new active pages, e.g. </p>

<p> <code>http://penguin.crc.ricoh.com:8888/home.xh</code> </p>

<p> You should see our page displayed, in which case you can you can learn
    more options for setting up the PIA from the sections below, or you can
    tinker with it (with help from the <a href="author.html#Quick">Author's
    guide</a>). </p>

<p> In the long run you will probably want to serve files from a different
    directory (like the <code>.pia</code> directory described below), and you
    will probably want to have many different "sub-site" directories of active
    pages (see the <a href="author.html#Quick">Author's Guide</a>). </p>



</blockquote>
</big>

<hr>

</big>


<h1>Setup Details</h1>

<big>

<p> The PIA program needs to know (at least) two  things:
</p>

<ol>
  <li> Where to find its own files, including the Java class library.  This
       directory is the directory named <code>PIA</code> where the PIA was
       initially installed, and is called the PIA's ``<em>home</em>''
       directory, or <var>PIA_HOME</var> (see the <em>Experts Only</em>
       note below for a subtle clarification). 
  <li> Where the applications can write their data files, and the user can
       place new or customized applications.  This is called the PIA's
       ``<em>root</em>'' directory, or <var>PIA_ROOT</var>.
</ol>

<blockquote><small>

<p> These can (optionally) be set up using environment variables:</p>
<ol>
  <li> <var>PIA_HOME</var> indicates the location where the PIA files were
       installed.</li> 
  <li> <var>PIA_ROOT</var> indicates the location where the PIA web server
       first looks for its web pages, and where applications write their data
       files.</li>
</ol>

<p> Why two such directories?  So that one of them can be shared by many
    users and updated frequently (via CVS), while the other is personalized by
    each user and not overwritten by the updates. </p>

<p> The directory <var>PIA_HOME</var> parallels <var>PIA_ROOT</var>,
    but <var>PIA_ROOT</var> root has priority.  Whenever a PIA application
    needs to write a file it does so under <var>PIA_ROOT</var>; similarly,
    whenever the PIA <em>serves</em> a file to a browser, it looks first under
    <var>PIA_ROOT</var>.

<p> But if the PIA can't find a file in <var>PIA_ROOT</var>, it then looks in
    the <var>PIA_HOME</var> (which could even be a CD-ROM, because the PIA
    <em>never</em> tries to write files there!). In this way, we keep the
    PIA's core files, which you have just downloaded and which can be
    automatically updated using CVS, separate from any application data and
    personal customizations you may have done.

<p><em>Experts only:</em> The directory <var>PIA_HOME</var>, as described
above, actually refers to two funtionally different locations, which can be
addressed separately.  One is where the java classes and executables live;
that is always and forever <var>PIA_HOME</var>.  But the other location---the
<em>"virtual root,"</em>, where the PIA looks for applications it can't find
in <var>PIA_ROOT</var>---could in principle be somewhere else. </p>

<p>In fact, you can set the <em> virtual root</em> to be some third directory
by using the <code>-vroot</code> command-line option when starting the PIA,
but we don't recommend it for beginners.... not only is it confusing, but your
PIA server would no longer have access to cvs-updated applications in the
<code>Agents, Samples</code>, and <code>Contrib</code> directories. </p>

<p> In summary,  it is possible to let the PIA look for its executables in
    <code>PIA_HOME</code>, look (first) for  applications in
    <code>PIA_ROOT</code>, and look (last) for applications in the <em>virtual
    root</em>. </p>


</small></blockquote>



<p> As a consequence of this arrangement, <strong> we recommend you don't edit
    <i>anything</i> in <var>PIA_HOME</var>, which is automatically
    updated/overwritten by CVS, unless you are actively working on the PIA
    codebase.</strong> Instead, write everything under <var>PIA_ROOT</var>
    (e.g. <kbd>~/.pia</kbd>). </p>

<blockquote><small>
  <p> Most people will develop applications by making a new subdirectory
      of <code><var>PIA_ROOT</var>/Agents/</code>, then copying in documents
      from the <code>PIA/Samples</code> directory or from other applications.
      The completed application can then be moved to its proper place under
      <code><var>PIA_HOME</var></code> when the time comes to check it in.
  </p>
</small></blockquote>

<p> Usually the directory-setup process is invisible to you:
</p>

<ul>
  <li> <var>PIA_HOME</var> is set automatically by the script that starts the
       PIA. </li>
  <li> <var>PIA_ROOT</var> is <em>created</em> automatically the first time
       the PIA is run. </li>
</ul>

<blockquote><small>

<p> The execution scripts (e.g. <code>PIA/bin/pia</code>) attempt to set the
    <var>PIA_HOME</var> variable based on the location of the script or the
    current working directory.  But if you
    want to run the pia from a different location, or run a different version,
    you may have to explicitly set this variable to the location of the PIA
    directory you just installed.
</p>

<p> The directory <var>PIA_ROOT</var> is automatically created by the PIA the
    first time it is run.  You are free to change its location if desired; this
    can be done on the command line with the <kbd>-root</kbd> option, or by
    setting the environment variable <var>PIA_ROOT</var>.  On Unix, the
    default location for <var>PIA_ROOT</var> is <kbd>~/.pia</kbd>.  On
    Windows, the default directory is
    <code>c:\PIAUSERS\<var>username</var></code> (if a username is not
    available <code> nobody</code> is used).
</p>

<p> If you use the <kbd>-root</kbd> or <kbd>-home</kbd> command line option to
    specify <var>PIA_ROOT</var> or <kbd>PIA_HOME</kbd>, that setting takes
    precedence over the one you specify in the corresponding environment
    variable.
</p>

<p>It is convenient to put the directory <code><var>PIA_HOME</var>/bin</code>,
which contains scripts (including the one that implements the <code>pia</code>
command!)  into your shell's search path.  You may also want to specify a
different root.  On Linux you can do all of this by putting the following into
your <code>~/.bash_profile</code> file: </p>

<pre>
  # The following line will change depending on where the PIA is installed
  export PIA_HOME=$HOME/PIA
  export PATH=$PIA_HOME/bin:$PATH
  export PIA_ROOT=$HOME/.pia
</pre>

<p> This setup is not necessary if you always run the PIA using the command
    ``<code>PIA/bin/pia</code>'', but most users find this to be inconvenient.
</p>

<p> You may also need to set up Java's <code>CLASSPATH</code> environment
    variable.  The PIA's wrapper script will try to set one up for
    you, but whether it succeeds will depend on how clever your java
    implementation is.  You <em>don't</em> have to have
    <code><em>PIA_HOME</em>/src/java</code> in your <code>CLASSPATH</code>;
    the wrapper script <em>is</em> smart enough to add it for you.
</p>

<p> In addition, if you don't like the way this document looks because the
    difference in size between large and small fonts is too great, consider
    adding the following line to your <code>.Xdefaults</code> file.  Adjust
    the number to suit yourself; the default is 20 (percent).
</p>

<pre>
  Netscape*documentFonts.sizeIncrement:	15
</pre>
</small></blockquote>

</big>

<h1><a name="Running">Running the PIA </a></h1>

<big>
<ul>
  <li> See the <a href="#Quick">Quick Start</a> section for the commands 
       for running the PIA without setup.
  <li> If you have done the initial setup described above, you should be able
       to use the command <code>pia</code> by itself.
  <li> <code>pia -help</code> will display all of the command-line options
  <li> See <a href="using.html">Using the PIA</a> for more information,
       including the available command line and configuration file options.
</ul>

<blockquote><small>

<p>On UNIX or Linux, once you have set up the <code><var>PIA_HOME</var></code>
and <code><var>PIA_ROOT</var></code> environment variables and put
<code><var>PIA_HOME</var>/bin</code> in your search path as described in the
previous section, you should be able to start the PIA with the command:
``<code>pia</code>'' A complete list of command-line options can be found by
running <kbd>$PIA_HOME/bin/pia -help</kbd> at the shell prompt.</p>

<p>Under Windows 9x and NT, launch the PIA in a DOS window with the command:
<code><var>PIA_HOME</var>/bin/pia.bat</code> -- this is a batch file that makes
use of the <code><var>PIA_HOME</var></code> and <code><var>PIA_ROOT</var></code>
environment variables, and is similar in function to <code>pia_wrapper</code>
on Unix.</p>

</small></blockquote>

<h1>Using the PIA</h1>

<p> The PIA acts as a Web server.  Assuming you have gotten the PIA to run in
    its default configuration, you should now be able to browse to <code><a
    href="http://localhost:8888/">http://localhost:8888/</a></code> in order
    to access the PIA's own web pages. </p>

<blockquote><small>

<p>If the default configuration is
    different and you have run the PIA from a command line, it will have
    printed out a line like:
</p>

<pre>
  Point your browser to &lt;URL: http://blackroot.crc.ricoh.com:8001&gt;
</pre>

<p> after initializing, and you can cut-and-paste the URL on that line into
    your browser and go from there. 
</p>

<p> There are some applications---such as a browser proxy and browsing-history
    system---which require that your browser use the PIA as a proxy.  This
    enables the PIA to process any incoming and outgoing pages as you would
    like.  See the <code>Proxie</code> agent for more details.
</p>

<p> It is also possible to use the PIA ``off line'' from the command line, as
    a pure document processor.  See <a href="using.html#Processing">Using the
    PIA</a>.
</p>

</small></blockquote>
</big>

<h1><a name="Questions">Questions, Problems, or Comments</a></h1>

<big>
<p> See the section on <a
    href="using.html#Troubleshooting">Troubleshooting</a> in
    <a href="using.html">Using the PIA</a> if you're having problems getting
    the PIA started, or if it does something unexpected.
</p>

<p>You can check for known bugs by going to <code><a
href="http://www.RiSource.org/PIA/">
http://www.risource.org/PIA/</a></code></p>

<p> Questions, problems and comments should be directed to <code><a
href="mailto:pia-bugs@risource.org">PIA-bugs@risource.org</a></code>.  </p>

</big>

<hr>
<b>Copyright &copy; 1999 <a href="http://rsv.ricoh.com/">Ricoh Silicon
   Valley</a>.</b>
   Open Source at &lt;<b><a href="http://RiSource.org/">RiSource.org</a>/<a
                         href="http://RiSource.org/PIA">PIA</a></b>&gt;.<br>
<i>$Id: install.html,v 1.20 1999-10-22 18:58:31 bill Exp $</i><br>


</body></html>
