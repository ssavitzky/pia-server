<!DOCTYPE  html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Initialize the &agentName; agent</title>
</head><body>
<h1>Initialize the &agentName; agent</h1>

<user-message>Initializing &agentName; from &filePath;</user-message>
<set name='AGENT:criteria'>response agent-response-</set>
<user-message>&agentName; criteria: &AGENT:criteria;</user-message>

<set name='AGENT:controls'><protect><!--  from History agent:  -->
<set name='pia'>http://&piaHOST;:&piaPORT;</set>
[<a href='&pia;/History' target='_top'>Hist</a>
 <a href='&pia;/History/~/' target='_top'>*</a>/<a href='&pia;/History/~/&year;/' target='_top'>&year;</a>/<a href='&pia;/History/~/&year;/&month;/' target='_top'>&month;</a>/<a href='&pia;/History/~/&year;/&month;/&day;.html' target='_top'>&day;</a>
 <a href='&pia;/History/~/last.html' target='_top'>&time;</a>]</protect></set>

<set name='AGENT:act-on'><protect>
   <set name='ct'><get name='TRANS:Content-type' /></set>
   <set name='fn'>~/&year;/&month;/&day;.html</set>
   <output directory='directory' dst='~/&year;/&month;/' /><!--  create dir. if necessary  -->
   <if><test match='html'>&ct;</test>
       <then><set entity='entity' name='title'><get name='TRANS:title' /></set>
	     <output append='append' dst='&fn;'><if><!--  dummy to suppress line brk  -->
	 	</if>&time; <a href='&url;'>&url; : &title;</a><br />
</output>
             <output dst='~/last.link'><a href='&url;'>&url; : &title;</a>
</output>
             <output dst='~/last.html'>&date; &time; <a href='&url;'>&url; : &title;</a>
<dl>
  <dt> <b>Link:</b>
  </dt><dd> <protect result='result' markup='markup'><a href='&url;'>&url; : &title;</a></protect>
  </dd><dt> <b>Reply Header</b>
  </dt><dd> <pre><get name='TRANS:HEADERS' /></pre>
  </dd><dt> <b>Request Header</b>
  </dt><dd> <pre><get name='REQ:HEADERS' /></pre>
</dd></dl>
</output>
       </then>
       <else><output append='append' dst='&fn;'>&time; --&ct;- <a href='&url;'>&url;</a><br />
</output></else>
    </if>
</protect></set>

<dl>
  <dt> <b>Note:</b>
  </dt><dd> The history agent adds items to the history database (makes sense,
       doesn't it).  It does <em>not</em> put anything on pages returned to
       the user's browser; that's up to the <a href='/remoteTools'>remoteTools</a> agent.
</dd></dl>

<footer cvsid='$Id: initialize.xh,v 1.6 1999-04-07 13:58:07 steve Exp $' />
</body></html>
