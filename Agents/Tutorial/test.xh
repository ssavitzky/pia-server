<define element="widgetJavaScript">
  <action>
    <dont-show>
     <script LANGUAGE="JavaScript">
     function isaPosNum(s) {
	return (parseInt(s) > 0)
     }

     function qty_check(item, min, max) {
	var returnVal = false
	if (!isaPosNum(item.value)) 
	   alert("Please enter a positive number")
	else if (parseInt(item.value) < min) 
	   alert("Please enter a " + item.name + " greater than " + min)
	else if (parseInt(item.value) > max) 
	   alert("Please enter a " + item.name + " less than " + max)
	else 
	   returnVal = false
	return returnVal
     }

     function validateAndSubmit(theform, min, max) {
	if (qty_check(theform.quantity, min, max)) {
	   alert("Order submitted successfully")
	   return true
	}
	else {
	   alert("Sorry, order invalid... try again.")
	   return false
	}
     }
     </script>
    </dont-show>
  <action>
</define>

<define element="widgetForm">
  <action>
     <FORM NAME="widget_order" ACTION="test.xh" METHOD="get">
     How many widgets do you want today?
       (min=&attributes:min; max=&attributes:max;) 
     <INPUT TYPE="text" NAME="quantity"  />
     <BR> 
     <INPUT TYPE="button" VALUE="Enter Order"
     onClick="validateAndSubmit(this.form, &attributes:min;, &attributes:max;)">
     </FORM>
  </action>
</define>

<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html> 
<head><widgetJavaScript/></head>

<body>
  <widgetForm min="5" max="9"/>
</body>

</html>

